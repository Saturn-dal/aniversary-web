<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Slide ke Game & Anniversary</title>
<style>
body { margin:0; font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif; }

/* SLIDE 1 */
#slide1,#gameContainer,#anniversarySlide{
  position:absolute; top:0; left:0;
  width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
}
#slide1{
  flex-direction:column; gap:20px;
  background:linear-gradient(to bottom right,#ffe6f2,#fce4ec,#f9c7f0);
}
.btn-slide{
  padding:20px 40px; border:none; border-radius:15px;
  background:#db2777; color:#fff; font-size:1.5rem;
  cursor:pointer; transition:0.3s;
}
.btn-slide:hover{ transform:translateY(-5px); }
#kucingArea img{ max-width:200px; border-radius:15px; margin-top:15px; box-shadow:0 4px 12px rgba(0,0,0,0.3); }

/* GAME */
#gameContainer{ display:none; flex-direction:column; background:#9ed2ff; }
.wrap{ position:relative; max-width:920px; margin:0 auto; }
canvas{
  display:block; width:100%; height:auto;
  background:transparent; /* üî¥ bukan biru lagi */
  border:2px solid #111;
}
.controls{ position:fixed; left:50%; transform:translateX(-50%); bottom:16px; width:100%; max-width:920px; height:84px; pointer-events:none; }
.leftPad{ position:absolute; left:10px; bottom:0; display:flex; gap:10px; }
.rightPad{ position:absolute; right:10px; bottom:0; }
.btn{ pointer-events:auto; width:72px; height:72px; border-radius:50%; border:none; background:#222; color:#fff; font-size:28px; opacity:.92; box-shadow:0 8px 20px rgba(0,0,0,.25); }
.btn:active{ opacity:1; transform:translateY(1px); }
#nextBtn,#restartBtn{ position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); display:none; padding:16px 28px; border:none; background:#ff4081; color:#fff; border-radius:14px; font-size:20px; box-shadow:0 8px 20px rgba(0,0,0,.25); cursor:pointer; }

/* ANNIVERSARY */
#anniversarySlide{ display:none; flex-direction:column; background:linear-gradient(135deg,#fff7f9,#fff); }
.stage{position:relative;width:940px;max-width:96vw;padding:40px;border-radius:20px;background:linear-gradient(180deg,rgba(255,255,255,0.8),rgba(255,255,255,0.95));box-shadow:0 10px 30px rgba(0,0,0,0.08);overflow:hidden;text-align:center}
h1{margin:0 0 30px;font-size:34px;color:#ff6b81}
.cake{font-size:120px;line-height:1;display:inline-block;transition:transform 0.4s ease;}
.cake.animate{transform:scale(1.2) rotate(-5deg);}
canvas.confetti{position:absolute;inset:0;pointer-events:none;}
.next-btn{margin-top:30px;display:inline-block;padding:12px 20px;background:#ff6b81;color:#fff;font-size:18px;font-weight:600;border:none;border-radius:12px;cursor:pointer;box-shadow:0 6px 12px rgba(255,107,129,0.25);transition:transform 0.2s ease;}
.next-btn:hover{transform:scale(1.05);}

/* === TV RETRO (ditambahkan, tidak mengubah style di atas) === */
#tvRetro{
  position:absolute; top:0; left:0; width:100%; height:100%;
  display:none; justify-content:center; align-items:center;
  background-color:#fff0f5; padding:50px 20px; box-sizing:border-box;
}
.tv-inner{ max-width:760px; width:100%; text-align:center; }
.tv-inner h1{ font-size:2em; color:#d63384; margin:0 0 12px; }
.notif-text{ font-size:1.3em; margin:12px 0; font-weight:bold; background:linear-gradient(90deg,#ff4da6,#ff6699,#ff99cc); -webkit-background-clip:text; -webkit-text-fill-color:transparent; animation:glow 2s infinite alternate; }
@keyframes glow{ from{ text-shadow:0 0 5px #ff99cc; } to{ text-shadow:0 0 15px #ff4da6; } }
.notif-button{ font-size:2em; cursor:pointer; transition:transform 0.2s; margin-top:8px; display:inline-block; }
.notif-button:hover{ transform:scale(1.2); }
.tv-retro{ position:relative; width:360px; height:260px; margin:28px auto 0; background:linear-gradient(145deg,#3e3e3e,#1a1a1a); border-radius:20px; border:8px solid #555; box-shadow:0 15px 25px rgba(0,0,0,0.4); }
.tv-screen{ position:absolute; top:30px; left:20px; width:260px; height:180px; background:black; border-radius:10px; overflow:hidden; box-shadow:inset 0 0 10px #000; }
.tv-screen video{ width:100%; height:100%; }
.tv-label{ position:absolute; bottom:5px; left:50%; transform:translateX(-50%); font-size:0.9em; color:#ff99cc; font-weight:bold; }
.tv-buttons{ position:absolute; right:15px; top:40px; display:flex; flex-direction:column; gap:10px; }
.tv-buttons .btn{ width:20px; height:20px; background:#999; border-radius:50%; box-shadow:inset -2px -2px 5px rgba(0,0,0,0.5); }
.tv-foot{ width:100%; height:20px; background:#444; border-radius:0 0 10px 10px; position:absolute; bottom:-20px; left:0; }
.antenna{ position:absolute; top:-40px; left:50%; transform:translateX(-50%); width:0; height:0; }
.antenna::before,.antenna::after{ content:''; position:absolute; width:2px; height:40px; background:#999; top:0; }
.antenna::before{ left:-15px; transform:rotate(-45deg); transform-origin:bottom; }
.antenna::after{ right:-15px; transform:rotate(45deg); transform-origin:bottom; }

</style>
</head>
<body>

<!-- SLIDE 1 -->
<div id="slide1">
  <h1 style="font-size:3rem; color:#db2777;">Sayang, cinta aku ga?</h1>
  <div style="display:flex; gap:20px;">
    <button class="btn-slide" id="btnCinta">Cinta banget</button>
    <button class="btn-slide" id="btnGa" style="background:#555;">Ga</button>
  </div>
  <div id="kucingArea" style="display:none;">
    <img src="kucing.jpg" alt="Kucing Lucu">
  </div>
</div>

<!-- GAME -->
<div id="gameContainer">
  <div class="wrap">
    <canvas id="game" width="920" height="440"></canvas>
  </div>
  <button id="nextBtn">Selanjutnya ‚ñ∂</button>
  <button id="restartBtn">Ulang ‚ü≤</button>
  <div class="controls">
    <div class="leftPad">
      <button class="btn" id="tombolKiri">‚óÄ</button>
      <button class="btn" id="tombolKanan">‚ñ∂</button>
    </div>
    <div class="rightPad">
      <button class="btn" id="tombolLompat">‚¨Ü</button>
    </div>
  </div>
</div>

<!-- ANNIVERSARY -->
<div id="anniversarySlide">
  <div class="stage">
    <canvas class="confetti" id="confettiCanvas"></canvas>
    <h1>Selamat Anniversary 1, Sayang ü•∞</h1>
    <div class="cake" id="cake">üç∞</div>
    <br>
    <!-- Hanya ini yang diganti: panggil goToTvRetro() alih-alih alert -->
    <button class="next-btn" onclick="goToTvRetro()">Selesai ‚ù§Ô∏è</button>
  </div>
</div>

<!-- TV RETRO (DITAMBAHKAN) -->
<div id="tvRetro" aria-hidden="true">
  <div class="tv-inner">
    <h1>Sayang aku, terima kasih udah bareng aku selama 1 tahun ini ü•∞</h1>
    <p class="notif-text">Aku selalu nungguin notif ini di hp aku üòò</p>

    <!-- Tombol Lonceng -->
    <div class="notif-button" onclick="playNotif()">üîî</div>

    <!-- TV Retro -->
    <div class="tv-retro" role="region" aria-label="TV Retro">
      <div class="antenna"></div>
      <div class="tv-screen">
        <!-- Video kamu taruh di sini -->
        <video controls>
          <source src="video.mp4" type="video/mp4">
          Browser kamu gak support video üò¢
        </video>
      </div>
      <div class="tv-label">VIDEO</div>
      <div class="tv-buttons">
        <div class="btn" aria-hidden="true"></div>
        <div class="btn" aria-hidden="true"></div>
        <div class="btn" aria-hidden="true"></div>
      </div>
      <div class="tv-foot"></div>
    </div>

    <!-- Suara Notifikasi -->
    <audio id="notifSound" src="notif.mp3" preload="auto"></audio>
  </div>
</div>

<script>
/* SLIDE 1 */
const slide1=document.getElementById('slide1');
const btnCinta=document.getElementById('btnCinta');
const btnGa=document.getElementById('btnGa');
const kucingArea=document.getElementById('kucingArea');
const gameContainer=document.getElementById('gameContainer');
const anniversarySlide=document.getElementById('anniversarySlide');

btnCinta.addEventListener('click', ()=>{
  slide1.style.display='none';
  gameContainer.style.display='flex';
});
btnGa.addEventListener('click', ()=>{ kucingArea.style.display='block'; });

/* GAME */
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
const nextBtn=document.getElementById('nextBtn');
const restartBtn=document.getElementById('restartBtn');
const pemainImg=new Image(); pemainImg.src='pria.png';
const musuhImg=new Image(); musuhImg.src='musuh.png';
const wanitaImg=new Image(); wanitaImg.src='wanita.png';

const DUNIA_LEBAR=5200, TANAH_TINGGI=64, GRAVITASI=1.0, KECEPATAN=4.8, LOMPAT=20, MAX_JATUH=24;
const pemain={x:60,y:80,w:150,h:150,vx:0,vy:0,diTanah:false};
let kameraX=0;
const tombol={kiri:false,kanan:false,lompat:false};
function bindHold(elemen,key){
  const aktif=e=>{ e.preventDefault(); tombol[key]=true; };
  const nonaktif=e=>{ e.preventDefault(); tombol[key]=false; };
  ['pointerdown','touchstart','mousedown'].forEach(t=> elemen.addEventListener(t,aktif,{passive:false}));
  ['pointerup','pointercancel','touchend','touchcancel','mouseup','mouseleave'].forEach(t=> elemen.addEventListener(t,nonaktif,{passive:false}));
}
bindHold(document.getElementById('tombolKiri'),'kiri');
bindHold(document.getElementById('tombolKanan'),'kanan');
bindHold(document.getElementById('tombolLompat'),'lompat');
addEventListener('keydown',e=>{ if(e.code==='ArrowLeft') tombol.kiri=true; if(e.code==='ArrowRight') tombol.kanan=true; if(e.code==='Space'||e.code==='ArrowUp') tombol.lompat=true; });
addEventListener('keyup',e=>{ if(e.code==='ArrowLeft') tombol.kiri=false; if(e.code==='ArrowRight') tombol.kanan=false; if(e.code==='Space'||e.code==='ArrowUp') tombol.lompat=false; });

const tanah=[{x:0,w:800},{x:1000,w:700},{x:1900,w:700},{x:2800,w:700},{x:3600,w:400},{x:4100,w:600},{x:4800,w:500}].map(s=>({x:s.x,y:canvas.height-TANAH_TINGGI,w:s.w,h:TANAH_TINGGI}));
const platform=[{x:900,y:280,w:200,h:16},{x:1700,y:250,w:220,h:16},{x:2600,y:220,w:200,h:16},{x:3500,y:260,w:180,h:16},{x:4200,y:240,w:200,h:16},{x:4800,y:200,w:150,h:16}];
const musuh=[{x:600,y:canvas.height-110,w:50,h:50,mati:true},{x:1500,y:canvas.height-120,w:50,h:60,mati:true},{x:2400,y:canvas.height-130,w:50,h:70,mati:true},{x:3200,y:canvas.height-110,w:50,h:50,mati:true},{x:3700,y:canvas.height-120,w:50,h:60,mati:true},{x:4300,y:canvas.height-110,w:50,h:50,mati:true},{x:4900,y:canvas.height-120,w:50,h:60,mati:true}];
const goal={x:DUNIA_LEBAR-140,y:canvas.height-180,w:150,h:150};
let menang=false,kalah=false;
let skalaCinta=0;
function aabb(a,b){ return a.x<b.x+b.w && a.x+a.w>b.x && a.y<b.y+b.h && a.y+a.h>b.y; }
function fisika(){ /* sama persis seperti sebelumnya */ 
  pemain.vx=0;
  if(tombol.kanan)pemain.vx+=KECEPATAN;
  if(tombol.kiri)pemain.vx-=KECEPATAN;
  if(tombol.lompat && pemain.diTanah){ pemain.vy=-LOMPAT; pemain.diTanah=false; }
  pemain.vy+=GRAVITASI;if(pemain.vy>MAX_JATUH)pemain.vy=MAX_JATUH;
  pemain.x+=pemain.vx;
  musuh.forEach(m=>{ if(aabb(pemain,m)){ if(m.mati) kalah=true; else { if(pemain.vx>0)pemain.x=m.x-pemain.w; else pemain.x=m.x+m.w; } } });
  if(pemain.x<0)pemain.x=0;if(pemain.x+pemain.w>DUNIA_LEBAR)pemain.x=DUNIA_LEBAR-pemain.w;
  pemain.y+=pemain.vy;
  pemain.diTanah=false;
  [...tanah,...platform,...musuh].forEach(c=>{
    const dalamX=pemain.x+pemain.w>c.x && pemain.x<c.x+c.w;
    if(dalamX && pemain.vy>=0 && pemain.y+pemain.h>=c.y && pemain.y+pemain.h<=c.y+20){ pemain.y=c.y-pemain.h; pemain.vy=0; pemain.diTanah=true; }
    if(dalamX && pemain.vy<0 && pemain.y<=c.y+c.h && pemain.y>=c.y+c.h-14){ pemain.y=c.y+c.h; pemain.vy=0.4; }
  });
  if(pemain.y>canvas.height+60) kalah=true;
  if(aabb(pemain,goal)) menang=true;
  kameraX=pemain.x-canvas.width/2+pemain.w/2;
  if(kameraX<0)kameraX=0;if(kameraX>DUNIA_LEBAR-canvas.width)kameraX=DUNIA_LEBAR-canvas.width;
}
function render(){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.save(); ctx.translate(-kameraX,0);
  tanah.forEach(t=>{ ctx.fillStyle="#6d4c41"; ctx.fillRect(t.x,t.y,t.w,t.h); ctx.fillStyle="#4caf50"; ctx.fillRect(t.x,t.y-6,t.w,6); });
  platform.forEach(p=>{ ctx.fillStyle="#8d6e63"; ctx.fillRect(p.x,p.y,p.w,p.h); ctx.fillStyle="#66bb6a"; ctx.fillRect(p.x,p.y-5,p.w,5); });
  musuh.forEach(m=>ctx.drawImage(musuhImg,m.x,m.y,m.w,m.h));
  ctx.drawImage(wanitaImg,goal.x,goal.y,goal.w,goal.h);
  ctx.drawImage(pemainImg,pemain.x,pemain.y,pemain.w,pemain.h);
  ctx.restore();
  if(menang){ if(skalaCinta<1) skalaCinta+=0.02;
    ctx.save(); ctx.translate(canvas.width/2,canvas.height/2);
    ctx.scale(skalaCinta*5, skalaCinta*5); ctx.fillStyle="#ff4081";
    ctx.beginPath(); ctx.moveTo(0,-20);
    ctx.bezierCurveTo(20,-40,60,-10,0,40);
    ctx.bezierCurveTo(-60,-10,-20,-40,0,-20); ctx.fill(); ctx.restore();
    if(skalaCinta>=1) nextBtn.style.display='inline-block';
  }
  if(kalah) restartBtn.style.display='inline-block';
}
let rafId; let gameRunning=true;
function loop(){ if(!gameRunning) return; if(!menang && !kalah) fisika(); render(); rafId=requestAnimationFrame(loop); }
loop();
restartBtn.addEventListener('click', ()=>{
  pemain.x=60;pemain.y=80;pemain.vx=0;pemain.vy=0;pemain.diTanah=false;
  kameraX=0;menang=false;kalah=false;skalaCinta=0;
  restartBtn.style.display='none'; nextBtn.style.display='none';
  if(!gameRunning){ gameRunning=true; loop(); }
});
nextBtn.addEventListener('click', ()=>{
  gameRunning=false; cancelAnimationFrame(rafId);
  ctx.clearRect(0,0,canvas.width,canvas.height); // üî¥ clear biar ga sisa biru
  gameContainer.remove(); // üî¥ hapus game total
  anniversarySlide.style.display='flex';
  resizeCanvas(); autoBurst(); setInterval(autoBurst,5000);
});

/* CONFETTI */
const confettiCanvas=document.getElementById('confettiCanvas');
const cctx=confettiCanvas.getContext('2d');
const cake=document.getElementById('cake');
let W,H,particles=[];
const colors=['#ffd166','#06d6a0','#118ab2','#ef476f','#ffa69e','#d4a5a5'];
function resizeCanvas(){ W=confettiCanvas.width=confettiCanvas.offsetWidth; H=confettiCanvas.height=confettiCanvas.offsetHeight; }
window.addEventListener('resize',resizeCanvas); resizeCanvas();
function rand(min,max){return Math.random()*(max-min)+min}
function createParticle(fromSide){
  let xStart=fromSide==='left'?rand(0,W*0.2):rand(W*0.8,W);
  let yStart=rand(-20,H*0.3);
  return{x:xStart,y:yStart,r:rand(6,10),tilt:rand(-10,10),tiltSpeed:rand(0.05,0.12),color:colors[Math.floor(rand(0,colors.length))],vx:fromSide==='left'?rand(1,3):rand(-3,-1),vy:rand(2,5),life:0,ttl:rand(80,160)}
}
function burst(fromSide,count=60){ for(let i=0;i<count;i++) particles.push(createParticle(fromSide));
  if(!animating) start(); cake.classList.add('animate'); setTimeout(()=>cake.classList.remove('animate'),600);}
let animating=false,rafId2;
function draw(){ cctx.clearRect(0,0,W,H); for(let i=0;i<particles.length;i++){ const p=particles[i]; p.x+=p.vx;p.y+=p.vy;p.vy+=0.04;p.tilt+=p.tiltSpeed;p.life++;cctx.save();cctx.translate(p.x,p.y);cctx.rotate(p.tilt*Math.PI/180);cctx.fillStyle=p.color;cctx.fillRect(-p.r/2,-p.r/2,p.r,p.r*0.6);cctx.restore(); }
  particles=particles.filter(p=>p.life<p.ttl && p.y<H+50 && p.x>-50 && p.x<W+50);
  if(particles.length===0) stop();
}
function loop2(){ draw(); rafId2=requestAnimationFrame(loop2); }
function start(){ if(!animating){animating=true;loop2();}}
function stop(){ if(animating){animating=false;cancelAnimationFrame(rafId2);} }
function fitCanvas(){ confettiCanvas.style.width='100%'; confettiCanvas.style.height='100%'; resizeCanvas(); }
fitCanvas();
function autoBurst(){ burst('left',60); burst('right',60); }

/* === FUNGSI TAMBAHAN: pindah ke TV Retro & playNotif ===
   HANYA DITAMBAHKAN ‚Äî fungsi lain TIDAK DIUBAH sama sekali */
function goToTvRetro(){
  // sembunyikan anniversary, tampilkan tvRetro
  const tv=document.getElementById('tvRetro');
  if(tv){
    anniversarySlide.style.display='none';
    tv.style.display='flex';
    tv.setAttribute('aria-hidden','false');
  } else {
    // jika tvRetro belum ada (tidak mungkin di versi ini), tampil alert fallback
    alert('Terima kasih! üéâ');
  }
}
function playNotif(){
  const sound=document.getElementById('notifSound');
  if(sound){
    sound.currentTime=0;
    sound.play().catch(()=>{/* autoplay boleh diblok di beberapa browser */});
  }
}
</script>
</body>
</html>